@model QuizApp.Models.QuizResult
@{
    ViewData["Title"] = "Results";
    var message = ViewBag.ScoreMessage as string ?? "";
    var title = ViewBag.QuizTitle as string ?? "Quiz";
}
<div class="py-3">
    <h1 class="mb-2"><i class="bi bi-clipboard-check me-2"></i>@title — Results</h1>
    <p class="lead">You scored <strong>@Model.Correct</strong> / <strong>@Model.Total</strong>. @message</p>
</div>

<table class="table table-hover align-middle shadow-sm bg-white rounded">
    <thead class="table-light">
        <tr>
            <th>#</th>
            <th>Your</th>
            <th>Correct</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
        @for (int i = 0; i < Model.Total; i++)
        {
            var yourIdx = Model.Submitted[i];
            var correctIdx = Model.CorrectIndices[i];
            bool ok = yourIdx == correctIdx;
            <tr class="@(ok ? "table-success" : "table-danger")">
                <td>@(i + 1)</td>
                <td>@(yourIdx >= 0 ? ("ABCD"[yourIdx]).ToString().ToUpper() : "-")</td>
                <td>@("ABCD"[correctIdx]).ToString().ToUpper()</td>
                <td>@(ok ? "✅ Correct" : "❌ Wrong")</td>
            </tr>
        }
    </tbody>
</table>
<form asp-action="Retake" method="post" class="mt-3">
    @Html.AntiForgeryToken()
    <input type="hidden" name="quizId" value="@Model.QuizId" />
    <button type="submit" class="btn btn-outline-secondary btn-lg">
        <i class="bi bi-arrow-counterclockwise me-1"></i> Retake Quiz
    </button>
</form>
